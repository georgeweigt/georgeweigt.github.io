<html><body><script src='https://georgeweigt.github.io/eigenmath.js'></script><textarea id='stdin' rows='24' cols='80' style='font-family:courier;font-size:1em'>
cross(a,b) = (
dot(a[2],b[3]) - dot(a[3],b[2]),
dot(a[3],b[1]) - dot(a[1],b[3]),
dot(a[1],b[2]) - dot(a[2],b[1]))

gamma0 = ((1,0,0,0),(0,1,0,0),(0,0,-1,0),(0,0,0,-1))
gamma1 = ((0,0,0,1),(0,0,1,0),(0,-1,0,0),(-1,0,0,0))
gamma2 = ((0,0,0,-i),(0,0,i,0),(0,i,0,0),(-i,0,0,0))
gamma3 = ((0,0,1,0),(0,0,0,-1),(-1,0,0,0),(0,1,0,0))

gamma = (gamma1,gamma2,gamma3)

alpha1 = dot(gamma0,gamma1)
alpha2 = dot(gamma0,gamma2)
alpha3 = dot(gamma0,gamma3)

alpha = (alpha1,alpha2,alpha3)

beta = gamma0

phat(f) = -i d(f,(x,y,z))

Psi = psi(x,y,z)

H(f) = test(rank(f) == 0, H1(f), H2(f))

-- f is a scalar function

H1(f) = -i (dot(alpha1,d(f,x)) + dot(alpha2,d(f,y)) + dot(alpha3,d(f,z)))

-- f is a vector

H2(f) = (H1(f[1]),H1(f[2]),H1(f[3]))

"Verify commutator [H,L]"

L(f) = cross((x,y,z),-i (d(f,x),d(f,y),d(f,z)))

check(H(L(Psi)) - L(H(Psi)) == i cross(phat(Psi),alpha))

"ok"

"Verify commutator [H,S]"

check(cross(gamma,gamma) == -cross(alpha,alpha))

S(f) = test(rank(f) == 0, S1(f), S2(f))

-- f is a scalar function

S1(f) = -i/4 cross(alpha,alpha f)

-- f is a 4x4 matrix

S2(f) = -i/4 cross(alpha,(dot(alpha1,f),dot(alpha2,f),dot(alpha3,f)))

check(H(S(Psi)) - S(H(Psi)) == -i cross(phat(Psi),alpha))

"ok"
</textarea><button onclick='run()'>Run</button><br><div id='stdout'></div></body></html>
